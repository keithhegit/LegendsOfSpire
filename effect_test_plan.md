# 全量卡牌效果测试计划 (Effect Test Plan)

这份文档旨在指导人工测试所有 142 个已实装的卡牌效果。请按照批次顺序进行测试。

**测试环境建议**：
- 使用 `BattleScene` 进行测试。
- 建议使用调试工具或修改 `App.jsx` 中的初始卡组，将待测试的卡牌加入手牌。
- 关注控制台输出 (F12) 和游戏内数值变化。

---

## ⚠️ 重点回归测试 (High-Risk Regression Focus)

基于最近修复的 11 个核心 Bug，以下机制存在较高的关联风险，请在测试时**重点关注**：

### 1. 多段伤害与数值加成 (Multi-Hit Scaling)
*   **风险点**: 力量 (Strength) 或 易伤 (Vulnerable) 可能只加成第一段伤害，或者计算顺序错误。
*   **重点测试卡牌**:
    *   `JinxQ` (机枪扫射), `ZedQ` (手里剑), `KatarinaQ` (弧刃斩): 确保**每一段**伤害都享受力量加成。
    *   `KatarinaR` (死亡莲华): 5段伤害，验证易伤是否对每段生效。
    *   `YasuoR`: 随暴击次数浮动的多段伤害。

### 2. 持续伤害与状态衰减 (DOTs & Decay)
*   **风险点**: 伤害未触发、层数未衰减、或多个 DOT 同时存在时结算异常。
*   **重点测试卡牌**:
    *   `DariusQ/E` (流血): 验证回合结束伤害 = 层数 x 2，且层数 -1。
    *   `Neutral_040` (虚空砂): 验证虚空 DOT 伤害及衰减。
    *   `TeemoE` (中毒): 验证中毒与流血/虚空同时存在时的结算顺序。

### 3. 延迟生效效果 (Next Turn Effects)
*   **风险点**: 效果未在下回合开始时触发，或触发后未清除状态。
*   **重点测试卡牌**:
    *   `LuxW` (结界护盾), `Neutral_013`: 下回合抽牌。
    *   `Neutral_035`, `Neutral_036`: 下回合回蓝/获得护甲。
    *   `TeemoPassive`: 待机后的下回合收益。

### 4. "下一次" 条件判定 (Conditional Next Action)
*   **风险点**: 状态被错误消耗（如被非攻击牌消耗），或加成数值错误。
*   **重点测试卡牌**:
    *   `SylasE`, `VayneQ`, `Neutral_044`: 下一次攻击伤害翻倍/加成。验证打出**非攻击牌**时是否会错误消耗该状态。
    *   `ViktorQ`: 下一次技能伤害加成。
    *   `ZedW`: 影分身复制下一次攻击。

### 5. 免疫与减伤 (Immunity & Mitigation)
*   **风险点**: 免疫未能完全抵挡伤害，或减伤计算后出现负数/异常值。
*   **重点测试卡牌**:
    *   `YasuoW` (风之墙): 确保免疫状态下受击伤害为 0。
    *   `Neutral_033`, `Neutral_039`: 减伤效果验证。

### 6. 资源获取 (Resource Gain)
*   **风险点**: 金币/属性未实际增加到玩家数据中。
*   **重点测试卡牌**:
    *   `Neutral_011`, `Neutral_019`: 金币获取。
    *   `NasusQ`, `ThreshR`: 永久属性成长 (需观察战斗后数值)。

---

## 🟢 Batch 1: 基础战斗效果 (Basic Combat)

主要涵盖基础的伤害、防御和状态施加。

| 效果 ID | 测试卡牌 (ID) | 卡牌名称 | 前置条件 | 验证步骤 | 预期结果 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **MULTI_HIT** | `JinxQ` | 机枪扫射 | 无 | 打出卡牌 | 造成 3 次伤害，每次显示独立伤害数字；若有力量加成，每次都应生效。 |
| **VULNERABLE** | `GarenQ` | 致命打击 | 无 | 打出卡牌 | 敌人获得易伤状态（紫色图标），后续攻击伤害 x1.5。 |
| **WEAK** | `TeemoQ` | 致盲吹箭 | 无 | 打出卡牌 | 敌人获得虚弱状态（黄色图标），敌人下回合攻击伤害 x0.75。 |
| **STRENGTH** | `Ignite` | 点燃 | 无 | 打出卡牌 | 玩家力量增加（红色剑图标），下一张攻击牌伤害增加。 |
| **BLOCK** | `Defend` | 防御 | 无 | 打出卡牌 | 玩家获得护甲（蓝色盾条），敌人攻击时优先扣除护甲。 |
| **HEAL** | `Heal` | 治疗术 | 玩家HP不满 | 打出卡牌 | 玩家生命值增加，且不超过最大生命值。 |
| **DRAW** | `TeemoW` | 小跑 | 牌库有牌 | 打出卡牌 | 手牌数量增加 2 张。 |
| **POISON** | `TeemoE` | 毒性射击 | 无 | 打出卡牌 | 敌人获得中毒层数（绿色骷髅），回合结束时受到等量伤害，层数-1。 |
| **GAIN_AGI** | `Neutral_043` | 灵巧身法 | 无 | 打出卡牌 | 玩家获得敏捷（绿色盾图标），每回合开始获得的格挡值增加。 |
| **MARK** | `JinxE` | 火箭陷阱 | 无 | 打出卡牌 | 敌人获得标记（准星图标）。配合触发卡牌（如普通攻击）攻击该敌人。 |
| **MARK_TRIGGER** | `JinxE` | 火箭陷阱 | 敌人有标记 | 攻击敌人 | 触发额外伤害，标记被消耗（或层数减少）。 |
| **CLEANSE** | `GarenW` | 勇气 | 玩家有Debuff | 打出卡牌 | 玩家的一个负面状态（如易伤、虚弱）被移除。 |
| **DOUBLE_HIT** | `VayneQ` | 翻滚 | 无 | 打出卡牌 | 下一次攻击造成双倍伤害（需配合攻击牌验证）。 |
| **STUN** | `ViktorW` | 引力场 | 无 | 打出卡牌 | 敌人获得眩晕状态，跳过下一回合行动。 |
| **PULL** | `ThreshQ` | 死亡判决 | 无 | 打出卡牌 | 敌人被拉近（视觉效果），某些近战卡牌可能享受加成。 |
| **EXECUTE_SCALE** | `GarenR` | 德玛西亚正义 | 敌人残血 | 打出卡牌 | 造成大量真实伤害，伤害值随敌人已损生命值增加。 |
| **BLEED** | `DariusQ` | 大杀四方 | 无 | 打出卡牌 | 敌人获得流血层数（血滴图标），回合结束受到层数x2的伤害。 |
| **BLEED_VULN** | `DariusE` | 无情铁手 | 无 | 打出卡牌 | 敌人同时获得流血和易伤状态。 |
| **DRAW_NEXT** | `LuxW` | 结界护盾 | 无 | 打出卡牌 | 结束回合，下回合开始时额外抽 1 张牌。 |
| **BONUS_PER_EXTRA_MANA** | `LuxE` | 透光奇点 | 有额外法力 | 打出卡牌 | 伤害值高于面板，根据当前额外法力值计算加成。 |
| **CONDITIONAL_DOUBLE** | `LuxR` | 终极闪光 | 本回合出牌≥4 | 打出卡牌 | 伤害翻倍（需先打出 3 张其他牌）。 |
| **LOW_HP_BONUS** | `JinxR` | 超究极飞弹 | 敌人HP<50% | 打出卡牌 | 造成额外伤害（需先将敌人打至半血以下）。 |

---

## 🔵 Batch 2: 高级战斗机制 (Advanced Combat)

涉及暴击、吸血、斩杀和反击等进阶机制。

| 效果 ID | 测试卡牌 (ID) | 卡牌名称 | 前置条件 | 验证步骤 | 预期结果 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **CRIT_CHANCE** | `YasuoQ` | 斩钢闪 | 无 | 多次打出 | 有概率造成暴击（伤害数字变大/变色，通常为 2 倍）。 |
| **IMMUNE_ONCE** | `YasuoW` | 风之墙 | 无 | 打出卡牌 | 获得免疫状态。结束回合，敌人攻击时伤害为 0，显示 "IMMUNE"。 |
| **DOUBLE_IF_ATTACKED** | `YasuoE` | 疾风步 | 本回合已攻击 | 打出卡牌 | 伤害翻倍（需先打出一张攻击牌）。 |
| **SCALE_BY_CRIT** | `YasuoR` | 狂风绝息斩 | 本回合暴击过 | 打出卡牌 | 造成多次伤害，次数等于本回合暴击次数。 |
| **SELF_BLOCK** | `SonaQ` | 英勇赞美诗 | 无 | 打出卡牌 | 造成伤害的同时，自身获得护甲。 |
| **DRAW_MANA** | `SonaE` | 迅捷奏鸣曲 | 无 | 打出卡牌 | 抽牌并获得临时法力（法力值增加）。 |
| **PER_CARD_BONUS** | `SonaR` | 终乐章 | 本回合多出牌 | 打出卡牌 | 伤害随本回合已打出卡牌数量增加。 |
| **RETRO_BONUS** | `EkkoQ` | 时间折刃 | 上回合攻击过 | 打出卡牌 | 若上回合对该敌人造成过伤害，本卡伤害增加。 |
| **REFLECT_IF_HIT** | `EkkoW` | 时光护盾 | 无 | 打出卡牌 | 获得状态。敌人攻击时，受到反弹伤害。 |
| **NEXT_COST_REDUCE** | `EkkoE` | 相位俯冲 | 手有攻击牌 | 打出卡牌 | 手牌中下一张攻击牌的费用 -1。 |
| **HEAL_AND_DAMAGE** | `EkkoR` | 时空逆转 | 玩家掉血 | 打出卡牌 | 恢复生命值，同时对敌人造成伤害。 |
| **LIFELINK** | `SylasW` | 吸取之斩 | 玩家掉血 | 打出卡牌 | 造成伤害的同时，恢复等量（或固定量）生命值。 |
| **NEXT_ATTACK_DOUBLE** | `SylasE` | 叛乱突袭 | 无 | 打出卡牌 | 获得状态。下一张攻击牌造成的伤害翻倍。 |
| **COPY_ENEMY_ACTION** | `SylasR` | 夺魂 | 敌人意图攻击 | 打出卡牌 | 施放敌人即将进行的攻击（对敌人造成伤害）。 |
| **SELF_DAMAGE** | `UrgotE` | 超限驱动 | 无 | 打出卡牌 | 对敌人造成伤害，同时自己扣除少量生命值。 |
| **LOW_HP_EXECUTE** | `UrgotR` | 处刑索命 | 敌人HP<30% | 打出卡牌 | 直接消灭敌人（显示巨额伤害或直接致死）。 |
| **BUFF_NEXT_SKILL** | `ViktorQ` | 能量转导 | 手有技能牌 | 打出卡牌 | 下一张技能牌的数值（伤害或护甲）增加。 |
| **BONUS_IF_VULN** | `ViktorE` | 光束 | 敌人易伤 | 打出卡牌 | 若敌人有易伤，造成额外伤害。 |
| **DRAW_ON_USE** | `ViktorR` | 进化歧路 | 无 | 打出卡牌 | 造成伤害并抽牌。 |
| **REMOVE_BUFF** | `LeeR` | 猛龙摆尾 | 敌人有Buff | 打出卡牌 | 造成伤害并移除敌人一个增益状态（如力量、格挡）。 |
| **NEXT_HIT_DOUBLE** | `VayneQ` | 翻滚 | 无 | 打出卡牌 | 下一次攻击伤害翻倍。 |
| **STUN_IF_WEAK** | `VayneE` | 墙角突袭 | 敌人虚弱 | 打出卡牌 | 若敌人虚弱，使其眩晕。否则只造成伤害。 |
| **DEATHMARK** | `ZedR` | 死亡印记 | 无 | 打出卡牌 | 施加印记。几回合后印记爆发，造成期间受到伤害总和的百分比伤害。 |

---

## 🟡 Batch 3: 资源与卡牌管理 (Resource & Card Management)

涉及法力、抽牌、弃牌和卡牌变换。

| 效果 ID | 测试卡牌 (ID) | 卡牌名称 | 前置条件 | 验证步骤 | 预期结果 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **TEMP_MANA** | `Neutral_010` | 法力容器 | 无 | 打出卡牌 | 获得临时法力（本回合可用）。 |
| **GAIN_GOLD** | `Neutral_011` | 贪婪商券 | 无 | 打出卡牌 | 金币数量增加。 |
| **CONDITIONAL_DRAW** | `Neutral_012` | 战争学识 | 出2张攻击牌 | 打出卡牌 | 抽 2 张牌（未满足条件抽 1 张）。 |
| **NEXT_DRAW_PLUS** | `Neutral_013` | 战术速记 | 无 | 打出卡牌 | 结束回合。下回合开始时手牌数增加。 |
| **SCOUT** | `Neutral_014` | 暗影笔记 | 无 | 打出卡牌 | 查看敌人下回合意图（如果是隐藏状态则显示）。 |
| **GAMBLE** | `Neutral_015` | 金币押注 | 无 | 打出卡牌 | 随机：获得金币 或 失去生命。 |
| **MANA_IF_LOW_HAND** | `Neutral_016` | 法力石碎片 | 手牌<=3 | 打出卡牌 | 获得法力并抽牌。 |
| **PERMA_DRAW_ON_KILL** | `Neutral_017` | 求知铭文 | 击杀敌人 | 打出卡牌 | 击杀后，永久获得“每回合多抽1牌”的效果。 |
| **PERMA_UPGRADE_CARD** | `Neutral_018` | 匠魂之锤 | 手有可升级牌 | 打出卡牌 | 选择一张牌，该牌数值永久提升（本局游戏）。 |
| **WIN_GOLD_BONUS** | `Neutral_019` | 荣誉奖章 | 无 | 打出卡牌 | 战斗胜利结算时，金币奖励增加。 |
| **TEMP_STR_ON_KILLS** | `Neutral_020` | 猎手徽章 | 击杀敌人 | 打出卡牌 | 本场战斗击杀数达到阈值后，获得力量。 |
| **PERMA_STR_FOR_HP** | `Neutral_021` | 野心契约 | 无 | 打出卡牌 | 扣除最大生命值，永久获得力量。 |
| **DRAW_AT_START** | `Neutral_022` | 古老碑铭 | 无 | 打出卡牌 | 获得能力：每回合开始额外抽牌。 |
| **RECYCLE** | `Neutral_023` | 逆向引擎 | 弃牌堆有牌 | 打出卡牌 | 将弃牌堆的一张牌移回手牌。 |
| **SELF_HP_FOR_BLOCK** | `Neutral_024` | 献祭之环 | 无 | 打出卡牌 | 扣除生命值，获得大量护甲。 |
| **DISCOUNT_ONE_CARD** | `Neutral_025` | 随风信笺 | 手牌有高费 | 打出卡牌 | 手中随机一张牌费用 -1（本回合）。 |
| **UPGRADE_CARD** | `Neutral_026` | 暗金卷轴 | 手有普通牌 | 打出卡牌 | 手中一张牌升级（数值提升）。 |
| **BAIT_TRIGGER** | `Neutral_027` | 诱饵之箱 | 无 | 打出卡牌 | 放置诱饵。敌人攻击时触发反击伤害。 |
| **NEXT_ENEMY_COST_PLUS** | `Neutral_028` | 回旋弹 | 无 | 打出卡牌 | 敌人下回合行动（如果是出牌）费用增加（对AI通常表现为行动力受限）。 |
| **STR_DEBUFF** | `Neutral_029` | 虚弱契约 | 无 | 打出卡牌 | 敌人力量减少（攻击伤害降低）。 |
| **TRANSFORM** | `Neutral_030` | 重塑石 | 手有牌 | 打出卡牌 | 手中一张牌变为另一张随机牌。 |
| **REGEN_MANA** | `Neutral_035` | 能量回复 | 无 | 打出卡牌 | 本回合和下回合各恢复法力。 |
| **PASSIVE_BLOCK_IF_IDLE** | `Neutral_036` | 稳固姿态 | 不出其他牌 | 结束回合 | 下回合开始获得护甲。 |

---

## 🟣 Batch 4: 增益与状态管理 (Buffs & Debuffs)

涉及各种持续性效果和状态控制。

| 效果 ID | 测试卡牌 (ID) | 卡牌名称 | 前置条件 | 验证步骤 | 预期结果 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **OPEN_SHADOW_EVENT** | `Neutral_037` | 暗影岛之歌 | 无 | 打出卡牌 | 战斗胜利后，触发特殊事件弹窗。 |
| **HEAL_REDUCE** | `Neutral_038` | 诺克萨斯断章 | 无 | 打出卡牌 | 敌人获得“重伤”状态，回血量减少。 |
| **DAMAGE_REDUCE** | `Neutral_039` | 德玛之徽 | 无 | 打出卡牌 | 敌人获得状态，对你造成的伤害减少。 |
| **VOID_DOT** | `Neutral_040` | 虚空砂 | 无 | 打出卡牌 | 敌人获得虚空DOT（紫色），回合结束扣血。 |
| **CRIT_IF_VULN** | `Neutral_042` | 精准打击 | 敌人易伤 | 打出卡牌 | 必定暴击（伤害增加）。 |
| **NEXT_ATTACK_X2** | `Neutral_044` | 集火号令 | 无 | 打出卡牌 | 下一张攻击牌伤害 x2。 |
| **GAIN_STRENGTH_PER_HIT** | `Neutral_045` | 积蓄怒火 | 无 | 打出卡牌 | 获得能力：每次受击，力量 +1。 |
| **PASSIVE_BLOCK** | `Neutral_047` | 坚韧不拔7 | 无 | 打出卡牌 | 每回合开始自动获得护甲。 |
| **BLOCK_DRAW** | `Neutral_055` | 治疗波5 | 无 | 打出卡牌 | 获得护甲并抽牌。 |
| **GAIN_MANA** | `Neutral_058` | 法力回复8 | 无 | 打出卡牌 | 直接获得法力值。 |
| **RETALIATE_ON_HIT** | `Neutral_034` | 逆伤反震 | 无 | 打出卡牌 | 获得反伤状态。受击时敌人扣血。 |
| **NEXT_DAMAGE_REDUCE** | `Neutral_033` | 格挡之歌 | 无 | 打出卡牌 | 获得减伤状态。下一次受击伤害减少。 |
| **PERMA_STR_ON_KILL** | `NasusQ` | 汲魂痛击 | 击杀敌人 | 打出卡牌 | 击杀后，永久力量 +1。 |
| **WEAK_VULN** | `NasusW` | 腐化咒 | 无 | 打出卡牌 | 敌人同时获得虚弱和易伤。 |
| **KILL_REWARD** | `IreliaQ` | 利刃冲击 | 击杀敌人 | 打出卡牌 | 击杀后，返还法力并抽牌。 |
| **REFLECT_BUFF** | `IreliaW` | 反击之舞 | 无 | 打出卡牌 | 获得反击状态。受击后下一次攻击加成。 |
| **ALL_ATTACKS_BONUS** | `IreliaR` | 先锋突袭 | 无 | 打出卡牌 | 获得状态：本回合所有攻击伤害增加。 |
| **DRAW_ON_HIT** | `KatarinaW` | 迅刃突袭 | 无 | 打出卡牌 | 造成伤害并抽牌。 |
| **COMBO_BONUS** | `KatarinaE` | 蛇步闪击 | 本回合已伤害 | 打出卡牌 | 若本回合已造成过伤害，本卡伤害增加。 |
| **MULTI_STRIKE_SEGMENTS** | `KatarinaR` | 死亡莲华 | 无 | 打出卡牌 | 造成多段伤害（如 5 段），每段独立计算护甲。 |

---

## 🔴 Batch 5: 特殊机制 (Special Mechanics)

包含英雄专属被动和复杂交互。

| 效果 ID | 测试卡牌 (ID) | 卡牌名称 | 前置条件 | 验证步骤 | 预期结果 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **GarenPassive** | (被动) | 坚韧 | 回合结束 | 观察HP | 若本回合未受击，回合结束回复生命。 |
| **DariusPassive** | (被动) | 出血 | 攻击敌人 | 使用攻击牌 | 攻击施加流血层数。 |
| **LuxPassive** | (被动) | 光芒 | 施放技能 | 使用技能牌 | 技能牌造成伤害后，下一次普攻附带额外伤害。 |
| **JinxPassive** | (被动) | 罪恶快感 | 击杀/空手 | 击杀或打空手牌 | 获得能量或抽牌奖励。 |
| **YasuoPassive** | (被动) | 浪客之道 | 移动/出牌 | 观察护甲 | 暴击率翻倍；移动（出牌）积攒护甲。 |
| **SonaPassive** | (被动) | 能量和弦 | 施放3次技能 | 使用3次技能 | 下一次普攻附带额外效果（伤害/减伤/减速）。 |
| **EkkoPassive** | (被动) | Z型驱动 | 3次攻击 | 攻击3次 | 第3次攻击造成额外伤害并偷取移速（敏捷）。 |
| **SylasPassive** | (被动) | 破敌禁法 | 施放技能 | 使用技能牌 | 下一次普攻变为范围伤害（AOE）或强化普攻。 |
| **UrgotPassive** | (被动) | 回响烈焰 | 攻击方向 | 观察伤害 | 周期性对周围敌人造成额外伤害（卡牌游戏中可能体现为周期性AOE）。 |
| **ViktorPassive** | (被动) | 光荣进化 | 击杀/升级 | 击杀敌人 | 获得海克斯碎片，用于升级技能。 |
| **LeeSinPassive** | (被动) | 疾风骤雨 | 施放技能 | 使用技能牌 | 下2次普攻回复能量。 |
| **VaynePassive** | (被动) | 暗夜猎手 | 攻击同目标 | 连续攻击3次 | 第3次攻击造成真实伤害。 |
| **TeemoPassive** | (被动) | 游击战 | 待机 | 不出牌 | 下回合获得攻速（多抽牌或能量）。 |
| **ThreshPassive** | (被动) | 地狱诅咒 | 敌人死亡 | 击杀敌人 | 掉落灵魂，收集增加护甲和法强。 |
| **NasusPassive** | (被动) | 吞噬灵魂 | 攻击 | 使用攻击牌 | 获得生命偷取（回血）。 |
| **IreliaPassive** | (被动) | 艾欧尼亚热诚 | 技能命中 | 使用技能牌 | 获得攻速（多抽牌）和护盾伤害加成。 |
| **KatarinaPassive** | (被动) | 贪婪 | 击杀 | 击杀敌人 | 技能冷却刷新（回手或减费）。 |
| **ZedPassive** | (被动) | 影忍法 | 低血量敌人 | 攻击低血敌 | 对低血量敌人造成额外魔法伤害。 |

---

**测试记录表**：

建议您在测试过程中，对每个通过的测试项打钩 ✅，发现问题的项打叉 ❌ 并记录现象。

```markdown
- [ ] Batch 1 测试完成
- [ ] Batch 2 测试完成
- [ ] Batch 3 测试完成
- [ ] Batch 4 测试完成
- [ ] Batch 5 测试完成
```
