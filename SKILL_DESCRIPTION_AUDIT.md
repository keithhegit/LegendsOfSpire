# 🔍 20位英雄技能描述一致性审计报告

> **审计日期**: 2025-11-21  
> **审计范围**: 所有20位英雄的被动技能描述  
> **对比项**: 文档描述 vs 游戏内显示 vs 实际代码逻辑

---

## 📊 审计结果概览

| 状态 | 数量 | 英雄 |
|------|------|------|
| ✅ 完全一致 | 7 | 盖伦、德莱厄斯、拉克丝、金克丝、娑娜、艾克、塞拉斯 |
| ⚠️ 描述不精确 | 10 | 亚索、厄加特、维克托、瑞文、卡牌、盲僧、薇恩、劫、内瑟斯、艾瑞莉娅 |
| ❌ 未实现/错误 | 3 | 锤石、卡特琳娜、提莫 |

**总计问题**: 13/20 英雄需要修正

---

## 🔴 严重不一致 (需要立即修复)

### 1. ❌ 内瑟斯 (Nasus) - 描述歧义

| 位置 | 描述内容 |
|------|----------|
| **文档 (game_data.md)** | "汲魂痛击：击杀敌人+1力量" |
| **游戏内 (champions.js)** | "汲魂痛击: 每次用攻击牌击杀敌人，获得1点力量" ✅ |
| **代码逻辑** | `if (heroData.relicId === "NasusPassive" && lastPlayedCard && lastPlayedCard.type === 'ATTACK')` ✅ |

**问题**: 文档描述不精确，未说明"用攻击牌"这一限制条件  
**影响**: 中等 - 玩家可能误以为任何方式击杀都能触发  
**修复**: 更新 `game_data.md` 和 `BALANCE_FIXES_SUMMARY.md`

---

### 2. ❌ 锤石 (Thresh) - 实现简化

| 位置 | 描述内容 |
|------|----------|
| **文档** | "地狱诅咒：敌人死亡增加 2 最大生命值" |
| **游戏内** | "地狱诅咒: 敌人死亡增加 2 最大生命值" |
| **代码逻辑** | `setPlayerHp(h => h + 2)` ❌ 只增加当前HP |

**问题**: 代码未实现最大HP提升，只增加了当前HP  
**影响**: 高 - 功能性缺失  
**修复**: 添加注释说明简化实现，或改为"敌人死亡恢复 2 点生命值"

---

### 3. ❌ 卡特琳娜 (Katarina) - 描述错误

| 位置 | 描述内容 |
|------|----------|
| **文档** | "贪婪：每回合打出的每第 4 张攻击牌伤害翻倍" |
| **游戏内** | "贪婪: 每回合打出的每第 4 张攻击牌伤害翻倍" |
| **代码逻辑** | `if (katarinaAttackCount === 4) dmg = dmg * 2; setKatarinaAttackCount(0);` |

**问题**: 描述应为"每打出4张攻击牌，下一张攻击牌伤害翻倍"（是第5张，不是第4张）  
**影响**: 高 - 描述与实际不符  
**修复**: 修改代码逻辑为 `katarinaAttackCount % 4 === 0`

---

## 🟡 中等不一致 (建议修复)

### 4. ⚠️ 瑞文 (Riven) - 能量/法力混淆

| 位置 | 描述内容 |
|------|----------|
| **文档** | "符文之刃：每打出3张攻击牌获得1点能量" |
| **游戏内** | "符文之刃: 每打出3张攻击牌，获得1点能量" |
| **代码逻辑** | `setPlayerMana(m => Math.min(initialMana, m + 1))` ✅ |

**问题**: "能量"应统一为"法力"（游戏中显示为Mana）  
**影响**: 中等 - 术语不统一  
**修复**: 全局替换"能量"→"法力"

---

### 5. ⚠️ 盲僧 (LeeSin) - 描述不精确

| 位置 | 描述内容 |
|------|----------|
| **文档** | "疾风骤雨：技能牌后下张攻击-1费" |
| **游戏内** | "疾风骤雨: 打出技能牌后，下一张攻击牌费用-1" ✅ |
| **代码逻辑** | `if (leeSinSkillBuff) actualCost = Math.max(0, card.cost - 1)` ✅ |

**问题**: 文档过于简略  
**影响**: 低 - 意思明确但不够专业  
**修复**: 采用游戏内完整描述

---

### 6. ⚠️ 薇恩 (Vayne) - 描述不精确

| 位置 | 描述内容 |
|------|----------|
| **文档** | "圣银弩箭：连续3次伤害额外10伤" |
| **游戏内** | "圣银弩箭: 对同一目标连续造成3次伤害时，额外造成10伤" ✅ |
| **代码逻辑** | `if (newHitCount >= 3) { dmgToHp += 10; }` ✅ |

**问题**: 文档缺少"对同一目标"的限制说明  
**影响**: 中等 - 可能误导玩家  
**修复**: 采用游戏内完整描述

---

### 7. ⚠️ 劫 (Zed) - 描述不精确

| 位置 | 描述内容 |
|------|----------|
| **文档** | "影分身：首张攻击牌重复50%伤害" |
| **游戏内** | "影分身: 每回合第一张攻击牌会重复施放一次(50%伤害)" ✅ |
| **代码逻辑** | `if (zedFirstAttack && isFirstHit) { finalDmg += Math.floor(finalDmg * 0.5); }` ✅ |

**问题**: "重复施放"比"重复伤害"更准确  
**影响**: 低 - 核心意思正确  
**修复**: 采用游戏内描述

---

### 8. ⚠️ 艾瑞莉娅 (Irelia) - 能量/法力混淆

| 位置 | 描述内容 |
|------|----------|
| **文档** | "热诚：击杀敌人恢复1能量抽1牌" |
| **游戏内** | "热诚: 每次击杀敌人，恢复 1 点能量并抽 1 张牌" |
| **代码逻辑** | `setPlayerMana(m => Math.min(initialMana, m + 1)); drawCards(1);` ✅ |

**问题**: "能量"应为"法力"  
**影响**: 中等 - 术语不统一  
**修复**: 全局替换

---

### 9. ⚠️ 卡牌大师 (TwistedFate) - 描述缺失战斗胜利触发

| 位置 | 描述内容 |
|------|----------|
| **文档** | "灌铅骰子：战斗胜利额外+15金币" |
| **游戏内** | "灌铅骰子: 战斗胜利额外获得 15 金币" ✅ |
| **代码逻辑** | ❓ 未在BattleScene中实现，应在App.jsx的onWin中 |

**问题**: 被动可能未实现  
**影响**: 高 - 功能缺失？  
**修复**: 检查App.jsx是否有实现

---

### 10. ⚠️ 亚索 (Yasuo) - 暴击机制未实现

| 位置 | 描述内容 |
|------|----------|
| **文档** | "浪客之道：暴击+10%" |
| **游戏内** | "浪客之道: 暴击几率+10%" |
| **代码逻辑** | `if (Math.random() < 0.1) finalDmg = Math.floor(finalDmg * 2)` ✅ |

**问题**: 描述应为"暴击几率+10%"  
**影响**: 低  
**修复**: 文档补充"几率"

---

### 11. ⚠️ 厄加特 (Urgot) - 描述不精确

| 位置 | 描述内容 |
|------|----------|
| **文档** | "回火：战斗开始+15护甲" |
| **游戏内** | "回火: 战斗开始时获得 15 点临时护甲" ✅ |
| **代码逻辑** | `if(rid === "UrgotPassive") block += 15` ✅ |

**问题**: 缺少"临时"说明  
**影响**: 低  
**修复**: 补充"临时"

---

### 12. ⚠️ 维克托 (Viktor) - 描述不精确

| 位置 | 描述内容 |
|------|----------|
| **文档** | "光荣进化：50%获得额外基础卡" |
| **游戏内** | "光荣进化: 回合开始时，50% 几率获得一张额外基础卡" ✅ |
| **代码逻辑** | `if (Math.random() < 0.5) { hand.push(basicCard); }` ✅ |

**问题**: 文档过于简略  
**影响**: 低  
**修复**: 补充"回合开始时"和"几率"

---

### 13. ⚠️ 提莫 (Teemo) - 描述不精确

| 位置 | 描述内容 |
|------|----------|
| **文档** | "游击战：回合开始随机给敌人2层虚弱" |
| **游戏内** | "游击战: 回合开始时，随机给一名敌人施加 2 层虚弱" ✅ |
| **代码逻辑** | `setEnemyStatus(s => ({ ...s, weak: s.weak + 2 }))` ✅ |

**问题**: 缺少"给一名"（虽然游戏中只有单个敌人）  
**影响**: 低  
**修复**: 采用标准描述

---

## ✅ 完全一致的英雄 (无需修复)

1. **盖伦** - 坚韧: 战斗结束时恢复 6 HP
2. **德莱厄斯** - 出血: 每次攻击时，给予敌人 1 层虚弱
3. **拉克丝** - 光芒四射: 每回合开始时获得 1 点法力
4. **金克丝** - 爆发: 每回合初始手牌数量+1
5. **娑娜** - 能量弦: 每回合打出第三张卡时，获得 3 点临时护甲
6. **艾克** - Z型驱动共振: 每次打出消耗卡时，获得 1 点力量
7. **塞拉斯** - 叛乱: 每次打出技能牌时，回复 3 点生命值

---

## 📋 修复计划 (按优先级排序)

### 🔴 P0 - 紧急修复 (功能性问题)

#### 1. 修复卡特琳娜被动逻辑
**文件**: `src/components/BattleScene.jsx`

**当前代码**:
```javascript
// 卡特琳娜被动：每第4张攻击牌伤害翻倍
if (heroData.relicId === "KatarinaPassive" && katarinaAttackCount === 4) {
    dmg = dmg * 2;
    setKatarinaAttackCount(0); // 重置计数器
}
```

**修复后**:
```javascript
// 卡特琳娜被动：打出第4张攻击牌后，下一张攻击牌伤害翻倍
if (heroData.relicId === "KatarinaPassive") {
    if (katarinaAttackCount === 3) { // 第4张时触发（0,1,2,3 = 第4张）
        dmg = dmg * 2;
        setKatarinaAttackCount(0);
    } else {
        setKatarinaAttackCount(prev => prev + 1);
    }
}
```

或者保持当前逻辑，修改描述为："每打出4张攻击牌后重置，第4张攻击时伤害翻倍"

---

#### 2. 修复锤石被动描述
**文件**: `src/data/champions.js` + `game_data.md`

**选项A** - 修改描述（推荐，简单）:
```javascript
passive: "地狱诅咒: 每次击杀敌人，恢复 2 点生命值（简化实现）"
```

**选项B** - 完整实现（复杂，需要修改App.jsx）:
需要在`onWin`回调中增加maxHp参数传递

---

#### 3. 检查卡牌大师被动实现
**文件**: `src/App.jsx`

需要在`onWin`或`completeNode`中检查是否有：
```javascript
if (heroData.relicId === "TwistedFatePassive") {
    setGold(prev => prev + 15);
}
```

---

### 🟡 P1 - 高优先级 (描述标准化)

#### 4. 统一"能量"→"法力"术语
**文件**: `game_data.md`, `champions.js`, `relics.js`

全局替换：
- "能量" → "法力"
- "能量并抽" → "法力并抽"

---

#### 5. 更新所有简略描述为完整版
**文件**: `game_data.md`

| 英雄 | 修改前 | 修改后 |
|------|--------|--------|
| 内瑟斯 | 击杀敌人+1力量 | 每次用攻击牌击杀敌人，获得1点力量 |
| 盲僧 | 技能牌后下张攻击-1费 | 打出技能牌后，下一张攻击牌费用-1 |
| 薇恩 | 连续3次伤害额外10伤 | 对同一目标连续造成3次伤害时，额外造成10伤 |
| 劫 | 首张攻击牌重复50%伤害 | 每回合第一张攻击牌会重复施放一次(50%伤害) |
| 亚索 | 暴击+10% | 暴击几率+10% |
| 厄加特 | 战斗开始+15护甲 | 战斗开始时获得 15 点临时护甲 |
| 维克托 | 50%获得额外基础卡 | 回合开始时，50% 几率获得一张额外基础卡 |
| 提莫 | 回合开始随机给敌人2层虚弱 | 回合开始时，给敌人施加 2 层虚弱 |

---

### 🟢 P2 - 低优先级 (文档完善)

#### 6. 添加被动技能详细说明章节
**文件**: `game_data.md`

在"遗物数据"章节后新增：

```markdown
## 被动技能详解

### 触发时机分类

#### 回合开始触发
- 拉克丝、维克托、金克丝、提莫

#### 打牌时触发
- 德莱厄斯、娑娜、艾克、塞拉斯、瑞文、盲僧、劫、卡特琳娜

#### 攻击命中时触发
- 亚索、薇恩

#### 击杀触发
- 内瑟斯、艾瑞莉娅、锤石

#### 战斗开始/结束触发
- 盖伦、厄加特

#### 战斗胜利触发
- 卡牌大师
```

---

## 📊 修复工作量估算

| 优先级 | 任务数 | 预计时间 | 复杂度 |
|--------|--------|----------|--------|
| P0 | 3项 | 30分钟 | 中 |
| P1 | 2项 | 15分钟 | 低 |
| P2 | 1项 | 10分钟 | 低 |
| **总计** | **6项** | **55分钟** | - |

---

## ✅ 验收标准

修复完成后需满足：

1. ✅ 所有被动技能描述在3处完全一致（文档、游戏内、代码注释）
2. ✅ 卡特琳娜被动逻辑正确（第4张攻击时触发）
3. ✅ 锤石被动描述与实现匹配
4. ✅ 卡牌大师被动正常工作
5. ✅ 术语统一（法力 vs 能量）
6. ✅ 无歧义、完整、专业的描述

---

## 🔄 后续建议

1. 建立**描述规范文档**，定义标准术语和格式
2. 实现**自动化测试**，验证被动触发
3. 添加**游戏内Tooltip**，鼠标悬停显示详细说明
4. 引入**本地化系统**，支持多语言一致性管理

---

**报告生成时间**: 2025-11-21  
**审计者**: AI主策划  
**下一步**: 根据修复计划逐项实施

