# 英雄技能平衡性修复总结

## ✅ 已修复（Commit待提交）

### 1. 卡牌大师 (TwistedFate)
**问题**: Q技能伤害过低，R技能费用过高无法有效使用
**修复**:
- `TwistedFateQ`: 2费8伤 → **1费8伤** (性价比提升至8伤/费)
- `TwistedFateR`: 2费抽3张 → **1费抽2张+1力量** (更实用，留1费可用抽到的牌)

###2. 提莫 (Teemo)
**问题**: 只有Q和R两个技能，缺失W技能
**修复**:
- 新增 `TeemoW` "小跑": 0费，+4护甲+抽1张牌
- 修改 `TeemoR` "致命毒刺": 2费，4次6伤 (总24伤，强化R技能)
- 更新初始卡组: `["TeemoQ", "TeemoW", "Strike", "Ignite"]`

### 3. 瑞文 (Riven)
**问题**: 只有Q和E两个技能，缺失W技能
**修复**:
- 新增 `RivenW` "镇魂怒吼": 1费，给予2层虚弱 (AOE晕眩简化)
- 更新初始卡组: `["RivenQ", "RivenW", "Strike", "Defend"]`

### 4. 锤石 (Thresh)
**问题**: Q技能"死亡判决" 2费10伤性价比过低
**修复**:
- `ThreshQ`: 2费10伤+1易伤 → **1费8伤+1易伤** (性价比提升)

### 5. 娑娜 (Sona)
**问题**: R技能属性重复，第二个`effect`覆盖第一个
**修复**:
- `SonaR`: 删除第一个 `effect: "STUN"`, 保留 `effect: "WEAK"`, 添加 `effect2: "VULNERABLE"`
- 描述更新为: "给予 3 层虚弱和 3 层易伤 (群体晕眩简化)"

---

## ⚠️ 待实现被动技能

以下被动技能在数据文件中定义，但在 `BattleScene.jsx` 中缺少实现逻辑：

### 1. **瑞文被动** - RivenPassive
- **描述**: "每打出3张攻击牌，获得1点能量"
- **实现方案**: 
  - 添加状态: `attackCardCount` (计数器)
  - 在 `playCard` 中检查 `card.type === 'ATTACK'`
  - 每3次重置并恢复1法力: `setPlayerMana(m => m + 1)`

### 2. **盲僧被动** - LeeSinPassive
- **描述**: "打出技能牌后，下一张攻击牌费用-1"
- **实现方案**:
  - 添加状态: `leeSinBuff` (boolean)
  - 打出 `SKILL` 牌时设为 `true`
  - 下一张攻击牌费用减1，然后重置为 `false`

### 3. **薇恩被动** - VaynePassive
- **描述**: "对同一目标连续造成3次伤害时，额外造成10伤"
- **实现方案**:
  - 添加状态: `vayneHitCount` (计数器)
  - 每次攻击命中 +1
  - 达到3次时额外伤害，然后重置
  - 回合结束或被击中时重置

### 4. **劫被动** - ZedPassive
- **描述**: "每回合第一张攻击牌重复施放一次(50%伤害)"
- **实现方案**:
  - 添加状态: `zedFirstAttack` (boolean)
  - `startTurnLogic` 时设为 `true`
  - 打出第一张攻击牌时，额外伤害 = dmg * 0.5
  - 设为 `false`

### 5. **内瑟斯被动** - NasusPassive
- **描述**: "每次用攻击牌击杀敌人，获得1点力量"
- **实现方案**:
  - 在 `useEffect` 监听 `enemyHp <= 0`
  - 检查最后一张牌是否为攻击牌
  - `setPlayerStatus(s => ({...s, strength: s.strength + 1}))`

### 6. **艾瑞莉娅被动** - IreliaPassive
- **描述**: "每次击杀敌人，恢复1点能量并抽1张牌"
- **实现方案**:
  - 在击杀检测中添加:
    - `setPlayerMana(m => Math.min(3, m + 1))`
    - `drawCards(1)`

### 7. **锤石被动** - ThreshPassive
- **描述**: "敌人死亡增加2最大生命值"
- **实现方案**:
  - 在 `useEffect` 监听 `enemyHp <= 0`
  - 修改 `heroData.maxHp` (需要通过回调传递给App.jsx)
  - 同时恢复当前HP

### 8. **卡特琳娜被动** - KatarinaPassive
- **描述**: "每回合打出的每第4张攻击牌伤害翻倍"
- **实现方案**:
  - 添加状态: `katAttackCount` (计数器)
  - 每次攻击 +1
  - 当 `katAttackCount === 4` 时伤害翻倍，然后重置

### 9. **提莫被动** - TeemoPassive (部分实现)
- **描述**: "回合开始时，随机给一名敌人施加2层虚弱"
- **当前状态**: ❓ 需检查是否在 `startTurnLogic` 中实现
- **实现方案**: 在 `startTurnLogic` 末尾添加:
  ```javascript
  if (heroData.relicId === "TeemoPassive") {
      setEnemyStatus(s => ({ ...s, weak: s.weak + 2 }));
  }
  ```

---

## 📊 R技能性价比对比表

| 英雄 | R技能 | 费用 | 总伤害/效果 | 性价比 | 评级 |
|------|------|------|-------------|--------|------|
| 盖伦 | 德玛西亚正义 | 3 | 30伤 | 10伤/费 | ⭐⭐⭐ |
| 德莱厄斯 | 断头台 | 3 | 40伤 | 13.3伤/费 | ⭐⭐⭐⭐ |
| 拉克丝 | 终极闪光 | 3 | 25伤(AOE) | 8.3伤/费 | ⭐⭐⭐⭐ (AOE) |
| 金克丝 | 死神飞弹 | 3 | 35伤(AOE) | 11.6伤/费 | ⭐⭐⭐⭐ |
| 亚索 | 狂风绝息斩 | 2 | 60伤(3x20) | 30伤/费 | ⭐⭐⭐⭐⭐ (过强) |
| 娑娜 | 狂舞终乐章 | 3 | 3虚弱+3易伤 | 控制 | ⭐⭐⭐ |
| 艾克 | 时空断裂 | 3 | 20伤+20回复 | 混合 | ⭐⭐⭐⭐ |
| 塞拉斯 | 其人之道 | 0 | 随机卡 | 特殊 | ⭐⭐⭐⭐ |
| 厄加特 | 超越死亡 | 3 | 50伤 | 16.6伤/费 | ⭐⭐⭐⭐⭐ |
| 维克托 | 混乱风暴 | 3 | 30伤(6x5) | 10伤/费 | ⭐⭐⭐ |
| 瑞文 | 放逐之刃 | 3 | 36伤(3x12) | 12伤/费 | ⭐⭐⭐⭐ |
| 卡牌 | 命运 | **1** ✅ | 抽2+1力量 | 辅助 | ⭐⭐⭐⭐ |
| 盲僧 | 猛龙摆尾 | 2 | 25伤 | 12.5伤/费 | ⭐⭐⭐⭐ |
| 薇恩 | 终极时刻 | 2 | 3力量 | Buff | ⭐⭐⭐ |
| 提莫 | 致命毒刺 | **2** ✅ | 24伤(4x6) | 12伤/费 | ⭐⭐⭐⭐ |
| 劫 | 瞬狱影杀阵 | 3 | 35伤 | 11.6伤/费 | ⭐⭐⭐⭐ |
| 内瑟斯 | 死神降临 | 3 | 20伤+5力量 | 混合 | ⭐⭐⭐⭐ |
| 艾瑞莉娅 | 先锋之刃 | 3 | 32伤(4x8) | 10.6伤/费 | ⭐⭐⭐ |
| 锤石 | 幽冥监牢 | 2 | 3虚弱+3易伤 | 控制 | ⭐⭐⭐⭐ |
| 卡特琳娜 | 死亡莲华 | 3 | 36伤(6x6) | 12伤/费 | ⭐⭐⭐⭐ |

**建议调整**:
- ⚠️ **亚索R** 过强 (60伤/2费)，建议改为 3费或降低伤害
- ⚠️ **厄加特R** 偏强 (50伤/3费)，可能需要降至45伤

---

## 🔄 下一步行动

1. ✅ 提交当前修复 (卡牌数据修正)
2. ⏳ 实现8个缺失的被动技能逻辑
3. ⏳ 调整过强/过弱的R技能
4. ⏳ 更新 `game_data.md` 反映所有改动
5. ⏳ 完整测试所有20位英雄

---

**生成时间**: 2025-11-21  
**分支**: new_map  
**状态**: 部分完成，待代码实现被动逻辑

