# Phase 4.1 地图生成测试指南 (v0.9.2)

## 📋 测试概述

**分支**: `card_balance`  
**版本**: v0.9.2  
**测试目标**: 验证六边形地图生成系统的稳定性和正确性

---

## 🎯 测试目标

### 主要验证项
1. ✅ **BOSS可达性**: 每次生成的地图都能到达BOSS
2. ✅ **三选一机制**: 玩家移动时始终有1-3个可选节点
3. ✅ **地图结构**: 节点连接正确，无孤立节点
4. ✅ **存档系统**: 游戏进度保存和恢复正常

### 测试范围
- ACT1 (10层地图): 10次测试
- ACT2 (20层地图): 3次测试
- ACT3 (30层地图): 3次测试

---

## 🚀 测试准备

### 1. 环境检查
```bash
# 确认分支
git branch
# 应显示 * card_balance

# 启动开发服务器
npm run dev
# 访问 http://localhost:5173
```

### 2. 浏览器准备
- 打开浏览器 (Chrome/Edge 推荐)
- 打开开发者工具 (F12)
- 切换到 Console 标签页
- 准备记录测试结果

---

## 📝 测试步骤

### ACT1 地图生成测试 (10次)

**测试流程**:

1. **开始新游戏**
   - 访问 http://localhost:5173
   - 点击 "新游戏" 按钮
   - 登录账号 (如需要)

2. **选择英雄**
   - 每次测试选择不同英雄
   - 观察英雄选择界面加载

3. **检查地图生成**
   - 地图视图加载后，观察：
     - [ ] 六边形节点正常显示
     - [ ] 起点节点在底部
     - [ ] BOSS节点在顶部
     - [ ] 节点类型图标清晰

4. **验证BOSS可达性**
   - 方法1: 视觉检查路径连接
   - 方法2: 实际游玩到达BOSS
   - 记录: 能否看到到达BOSS的路径

5. **测试三选一机制**
   - 点击起点，开始移动
   - 观察可选节点数量 (应为1-3个)
   - 选择一个节点后：
     - [ ] 其他节点变灰(锁定)
     - [ ] 锁定的节点无法点击
     - [ ] 高亮显示当前位置

6. **记录测试数据**

| # | 英雄 | BOSS可达 | 三选一正常 | 节点总数 | 问题描述 | 截图 |
|---|------|---------|-----------|---------|---------|------|
| 1 |      | ✓/✗     | ✓/✗       |         |         |      |
| 2 |      | ✓/✗     | ✓/✗       |         |         |      |
| 3 |      | ✓/✗     | ✓/✗       |         |         |      |
| 4 |      | ✓/✗     | ✓/✗       |         |         |      |
| 5 |      | ✓/✗     | ✓/✗       |         |         |      |
| 6 |      | ✓/✗     | ✓/✗       |         |         |      |
| 7 |      | ✓/✗     | ✓/✗       |         |         |      |
| 8 |      | ✓/✗     | ✓/✗       |         |         |      |
| 9 |      | ✓/✗     | ✓/✗       |         |         |      |
| 10|      | ✓/✗     | ✓/✗       |         |         |      |

**推荐英雄顺序**:
盖伦 → 拉克丝 → 金克丝 → 亚索 → 娑娜 → 艾克 → 塞拉斯 → 内瑟斯 → 锤石 → 卡特琳娜

7. **刷新测试** (每3次测试后执行)
   - 刷新浏览器 (F5)
   - 点击 "继续征程"
   - 验证进度恢复正确

---

### ACT2 地图生成测试 (3次)

**前置条件**: 必须通关ACT1

**测试流程**:
1. 完整通关ACT1（击败BOSS）
2. 观察ACT2地图生成
3. 检查项目：
   - [ ] 地图层数约20层
   - [ ] 节点更密集
   - [ ] BOSS可达
   - [ ] 三选一机制正常

**记录表格**:

| # | 起始英雄 | 层数 | BOSS可达 | 三选一 | 问题 |
|---|---------|------|---------|--------|------|
| 1 |         |      | ✓/✗     | ✓/✗    |      |
| 2 |         |      | ✓/✗     | ✓/✗    |      |
| 3 |         |      | ✓/✗     | ✓/✗    |      |

---

### ACT3 地图生成测试 (3次)

**前置条件**: 必须通关ACT1和ACT2

**测试流程**:
1. 完整通关ACT1和ACT2
2. 观察ACT3地图生成
3. 检查项目：
   - [ ] 地图层数约30层
   - [ ] 大地图性能正常
   - [ ] BOSS可达
   - [ ] 三选一机制在大地图下正常

**记录表格**:

| # | 起始英雄 | 层数 | BOSS可达 | 三选一 | 性能 | 问题 |
|---|---------|------|---------|--------|------|------|
| 1 |         |      | ✓/✗     | ✓/✗    | ✓/✗  |      |
| 2 |         |      | ✓/✗     | ✓/✗    | ✓/✗  |      |
| 3 |         |      | ✓/✗     | ✓/✗    | ✓/✗  |      |

---

## 🔍 详细检查项

### 地图视觉检查
- [ ] 六边形节点清晰可见
- [ ] 节点图标正确显示（剑/商店/心/宝箱/事件）
- [ ] 路径连线正确
- [ ] 高亮节点有金色边框
- [ ] 锁定节点变灰
- [ ] 迷雾效果自然

### 交互检查
- [ ] 可以拖拽查看全图
- [ ] 点击节点响应正常
- [ ] 选择节点后锁定其他选项
- [ ] 返回地图按钮工作

### 性能检查
- [ ] 地图加载时间 < 2秒
- [ ] 拖拽流畅无卡顿
- [ ] 节点动画流畅
- [ ] 大地图(ACT3)性能可接受

---

## 🐛 问题记录模板

如果发现问题，请记录以下信息：

```
问题编号: #001
发现时间: YYYY-MM-DD HH:MM
测试项目: ACT1 第3次测试
英雄: 金克丝
问题描述: 地图生成后无法到达BOSS，路径在第7层断开
重现步骤:
  1. 选择金克丝
  2. 进入地图视图
  3. 观察路径连接
预期结果: 应该有路径连接到BOSS
实际结果: 第7层没有向上的连接
截图: [附件路径]
控制台日志: [复制相关错误]
```

---

## ✅ 测试通过标准

### 合格标准
- ACT1: 10次测试，成功率 ≥ 90% (9/10)
- ACT2: 3次测试，成功率 100% (3/3)
- ACT3: 3次测试，成功率 100% (3/3)
- 无严重Bug（地图无解、程序崩溃）

### 优秀标准
- ACT1: 10次测试，成功率 100% (10/10)
- ACT2: 3次测试，成功率 100% (3/3)
- ACT3: 3次测试，成功率 100% (3/3)
- 性能流畅，无卡顿
- 用户体验良好

---

## 📊 测试报告模板

测试完成后，填写以下报告：

```markdown
# Phase 4.1 测试报告

## 测试摘要
- 测试日期: 2025-11-27
- 测试人员: [姓名]
- 测试分支: card_balance
- 测试版本: v0.9.2

## 测试结果
### ACT1
- 测试次数: 10
- 成功: X 次
- 失败: X 次
- 成功率: X%

### ACT2
- 测试次数: 3
- 成功: X 次
- 失败: X 次
- 成功率: X%

### ACT3
- 测试次数: 3
- 成功: X 次
- 失败: X 次
- 成功率: X%

## 发现的问题
1. [问题描述]
2. [问题描述]

## 建议
- [改进建议]

## 结论
- [ ] 通过测试，可以进入下一阶段
- [ ] 需要修复问题后重新测试
```

---

## 🎮 快速开始

```bash
# 1. 确认环境
git status
# 应在 card_balance 分支

# 2. 启动服务器
npm run dev

# 3. 开始测试
# 浏览器访问 http://localhost:5173
# 按照测试步骤执行
# 记录测试结果

# 4. 提交测试报告
# 完成后填写测试报告并反馈
```

---

祝测试顺利！ 🚀
